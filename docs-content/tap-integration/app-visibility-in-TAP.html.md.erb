---
title: App visibility in the TAP Backstage UI
owner: Spring Cloud Data Flow Release Engineering
---

The easiest way to get the stream apps to show in the Backstage UI is to register a Backstage Component for the stream. All stream apps are labeled with 'spring-group-id' so we can use that as the label selector.

```yaml
apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: ticktock
  description: TickTock Stream Apps
  tags:
    - spring
    - streaming
    - tanzu
  annotations:
    'backstage.io/kubernetes-label-selector': 'spring-group-id=ticktock'
spec:
  type: service
  lifecycle: experimental
  owner: default-team
  system: dataflow
```

We could also add a standard Kubernetes label `app.kubernetes.io/part-of=ticktock` that TAP typically uses.

## Enabling Live View for Stream apps

It is possible to provide a number of labels to enable Live View for the steam apps. However, Live View does not work for endpoints that are secured and the OOTB stream apps use Spring Security. We would need to find a way to disable security for the actuator endpoints.

Enabling Live View can be accomplished by adding the following properties to the stream apps:

App properties:
    "app.log.management.server.port":8081
    "app.log.management.security.enabled":false
    "app.log.management.endpoint.health.probes.add-additional-paths":true
    "app.log.management.endpoint.health.show-details":"always"
    "app.log.management.endpoints.web.base-path":"/actuator"
    "app.log.management.endpoints.web.exposure.include":"*"
    "app.log.management.health.probes.enabled":true

 Deployer properties:
    "deployer.log.kubernetes.readinessProbePort":8081
    "deployer.log.kubernetes.livenessProbePort":8081
    "deployer.log.kubernetes.startupProbePort":8081

Deployer "deploymentLabels":
    tanzu.app.live.view:true
    tanzu.app.live.view.application.actuator.path:actuator
    tanzu.app.live.view.application.actuator.port:8081
    tanzu.app.live.view.application.flavours:spring-boot
    tanzu.app.live.view.application.name:ticktock

![Live View for Stream apps](./images/tap-liveview.png)
